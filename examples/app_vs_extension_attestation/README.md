# App vs Extension Attestation Comparison

Compare attestations generated by the main app versus an extension (e.g., Network Extension, App Extension).

## Why This Matters

Extensions can generate their own App Attest keys and attestations. This creates separate trust surfaces that are often confused with main app attestations.

Treating extension and main app attestations as "the same identity" is incorrect. Each execution context has its own cryptographic identity.

## What Structural Differences Are Normal

- Different credential IDs (each context has its own key)
- Different certificate chains (may differ, both valid)
- Same RP ID hash (same app family)
- Same team ID and bundle ID prefix
- Different sign counts (independent counters)

## What This Helps With

- Understanding why extension attestations look different
- Verifying that both contexts are generating valid attestations
- Debugging why extension attestations fail validation
- Research into execution context differences

## What This Does Not Do

- Determine if differences are acceptable (policy decision)
- Verify either attestation is valid
- Explain why Apple treats contexts separately

## Important Boundaries

This tool does not decide if differences are acceptable. That is a policy decision you must make based on:
- Your app's security requirements
- Your understanding of execution contexts
- Your server-side validation logic

The tool only shows what differs. You decide what to do with that information.

## Usage

```bash
# Generate attestation from main app, save to main_app.b64
# Generate attestation from extension, save to extension.b64

./diff.sh main_app.b64 extension.b64
```

Review the output to see structural differences. The most common difference is the credential ID, which is expected since each context has its own key.
